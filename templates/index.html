<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Aviator Pronosticador IA</title>
<style>
body {
    background-color: #000;
    color: cyan;
    font-family: 'Arial', sans-serif;
    text-align: center;
}
.container {
    border: 2px solid cyan;
    border-radius: 15px;
    width: 330px;
    margin: 20px auto;
    padding: 10px;
    box-shadow: 0 0 15px cyan;
}
button {
    background-color: #00ffff;
    border: none;
    border-radius: 8px;
    color: black;
    padding: 8px;
    margin: 4px;
    width: 80px;
    cursor: pointer;
}
button:hover {
    background-color: #00cccc;
}
#limpiar {
    background-color: red;
    color: white;
    width: 260px;
}
#logout {
    color: red;
    text-decoration: none;
}
canvas {
    background-color: #000;
    border: 1px solid cyan;
    border-radius: 10px;
}
#mensajeIA {
    margin-top: 10px;
    font-size: 14px;
    color: #00ff88;
}
</style>
</head>
<body>
<div>
    <span><b>danmjp@gmail.com</b></span> | <a id="logout" href="/logout">Cerrar sesi√≥n</a>
</div>

<div class="container">
    <div id="timer">‚è±Ô∏è 00:34:49</div>
    <input type="text" id="inputCuota" readonly style="width:90%;height:25px;text-align:center;font-size:18px;margin:8px;">
    <div>
        <button onclick="addNum(1)">1</button><button onclick="addNum(2)">2</button><button onclick="addNum(3)">3</button><br>
        <button onclick="addNum(4)">4</button><button onclick="addNum(5)">5</button><button onclick="addNum(6)">6</button><br>
        <button onclick="addNum(7)">7</button><button onclick="addNum(8)">8</button><button onclick="addNum(9)">9</button><br>
        <button onclick="addNum('.')">.</button><button onclick="addNum(0)">0</button><button onclick="borrar()">Borrar</button><br>
        <button onclick="ingresar()">Ingresar</button>
        <button onclick="deshacer()">Deshacer</button><br>
        <button id="limpiar" onclick="confirmarLimpiar()">üßπ Limpiar Pantalla</button>
    </div>

    <h3>Historial</h3>
    <div id="historial"></div>
    <canvas id="grafica" width="300" height="180"></canvas>
    <div id="mensajeIA"></div>
</div>

<script>
let historial = [];
let ctx = document.getElementById('grafica').getContext('2d');

function addNum(num) {
    document.getElementById("inputCuota").value += num;
}
function borrar() {
    document.getElementById("inputCuota").value = "";
}
function deshacer() {
    historial.pop();
    actualizarHistorial();
    dibujarGrafica();
}
function confirmarLimpiar() {
    if (confirm("¬øSeguro que deseas limpiar todo?")) {
        historial = [];
        actualizarHistorial();
        dibujarGrafica();
        document.getElementById("mensajeIA").innerText = "";
    }
}
function ingresar() {
    let valor = parseFloat(document.getElementById("inputCuota").value);
    if (isNaN(valor)) return;
    historial.push(valor);
    document.getElementById("inputCuota").value = "";
    actualizarHistorial();
    dibujarGrafica();
    mostrarMensajeIA(valor);
}

function actualizarHistorial() {
    document.getElementById("historial").innerText = historial.join(" | ");
}

function mostrarMensajeIA(valor) {
    let msg = "";
    if (valor >= 2) msg = "üìà La IA detecta tendencia AL ALZA (morada)";
    else msg = "üìâ La IA detecta tendencia a la BAJA (azul)";
    document.getElementById("mensajeIA").innerText = msg;
}

function dibujarGrafica() {
    ctx.clearRect(0, 0, 300, 180);
    ctx.beginPath();
    ctx.strokeStyle = "cyan";
    ctx.lineWidth = 1;
    ctx.moveTo(0, 90);
    ctx.lineTo(300, 90);
    ctx.stroke();

    if (historial.length < 1) return;
    let step = 300 / (historial.length + 1);
    let y = 90;
    ctx.beginPath();
    ctx.moveTo(0, y);

    for (let i = 0; i < historial.length; i++) {
        let valor = historial[i];
        let color = valor >= 2 ? "magenta" : "cyan";
        ctx.strokeStyle = color;
        y = valor >= 2 ? y - 15 : y + 15;
        let x = step * (i + 1);
        ctx.lineTo(x, y);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(x, y, 3, 0, Math.PI * 2);
        ctx.fillStyle = "white";
        ctx.fill();
        ctx.beginPath();
        ctx.moveTo(x, y);
    }
}
</script>
</body>
</html>
